#!/usr/bin/env node
'use strict'

const co = require('co')
const sink = require('stream-sink')

const migrate = require('../migrate')

const address = '0x05BC2C0f2D182F5401046924C27542727CBB406E'
const owner = '0x00D189b71E5b42a88aa3e83173D4a6926e665336'

const readStdin = () =>
  process.stdin.pipe(sink()).then((data) => data)

co.wrap(function* () {
  const data = JSON.parse(yield readStdin())

  yield migrate(address, owner, data)

  process.exit(0)
})()
.catch((err) => {
  console.error(err)
  process.exit(1)
})
